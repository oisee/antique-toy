graph LR
    A["Prompt<br>(describe what you want)"] --> B["Generate Code<br>(AI writes Z80 asm)"]
    B --> C["Assemble<br>(sjasmplus / mza)"]
    C --> D{"Errors?"}
    D -- Yes --> E["Paste errors<br>back to AI"]
    E --> B
    D -- No --> F["Run in Emulator"]
    F --> G{"Output<br>correct?"}
    G -- No --> H["Describe what's wrong<br>(or paste DeZog state)"]
    H --> B
    G -- Yes --> I{"Optimise?"}
    I -- Yes --> J["Profile with DeZog<br>(measure T-states)"]
    J --> A
    I -- No --> K["Done âœ“"]

    style A fill:#ffd,stroke:#993
    style B fill:#ddf,stroke:#339
    style K fill:#dfd,stroke:#393
    style D fill:#fee,stroke:#933
    style G fill:#fee,stroke:#933
