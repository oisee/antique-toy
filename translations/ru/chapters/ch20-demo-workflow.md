# Глава 20: Рабочий процесс создания демо --- от идеи до компо

> *"Дизайн --- это совокупность всех компонентов демо, как видимых, так и скрытых. Дизайн характеризует реализационную, стилистическую, идейную целостность."*
> -- Introspec, "О дизайне", Hype, 2015

---

Демо не создаётся за один сеанс вдохновенного кодинга. Это проект --- с дедлайнами, зависимостями, творческими решениями, которые нужно зафиксировать за недели до пати, техническими ставками, которые оправдают себя или нет, и финальной работой, которая либо работает на машине для компо, либо ломается на глазах у зрителей. Расстояние от "у меня есть идея для демо" до "оно заняло третье место на DiHalt" измеряется не строками кода, а рабочим процессом: как ты организуешь эффекты, как планируешь время, как собираешь и тестируешь, как справляешься с неизбежным моментом, когда музыка не готова, а до пати четыре дня.

Эта глава --- о том самом рабочем процессе. Мы потратили девятнадцать глав на техники --- внутренние циклы, подсчёт тактов, сжатие, звук, синхронизацию. Теперь мы делаем шаг назад и спрашиваем: как реальное демо собирается воедино? Как перейти от пустого экрана к двухминутной продукции, которая надёжно работает, выглядит целенаправленно и попадает на нужную пати в нужный день?

Ответы приходят из трёх источников. Статья restorer'a making-of для Lo-Fi Motion (Hype, 2020) --- подробное исследование работающего производственного конвейера: четырнадцать эффектов, построенных за две недели вечернего кодинга, с системой таблицы сцен и тулчейном, который может воспроизвести любой читатель. Философские эссе Introspec'a на Hype --- "О дизайне" и "MORE" (оба 2015) --- формулируют дизайнерское мышление, которое отделяет коллекцию эффектов от целостного демо. И более широкая культура making-of в ZX Spectrum-сцене --- от подробного NFO Eager до рабочего процесса GABBA с видеоредактором на iOS и до 256-байтной головоломки NHBF --- даёт нам галерею подходов для изучения.

---

## 20.1 Что означает "дизайн" в демо

Когда демосценеры говорят "дизайн", они не имеют в виду графический дизайн. Они не имеют в виду компоновку UI или теорию цвета, хотя это тоже важно. Определение Introspec'a, опубликованное на Hype в январе 2015, шире и требовательнее:

> Дизайн --- это совокупность всех компонентов демо, как видимых, так и скрытых.

Это определение включает эффекты, которые видит зритель, переходы между ними, выбор музыки и её синхронизацию с визуалом, цветовую палитру, ритм, эмоциональную дугу --- но также архитектуру кода, раскладку памяти, стратегию сжатия, конвейер сборки и решения о том, что исключить. Демо с красивым пиксель-артом и ужасным ритмом имеет плохой дизайн. Демо с грубым визуалом, но идеальной музыкальной синхронизацией и ясной эмоциональной дугой может иметь превосходный дизайн. Намеренно уродливое демо, выбравшее свою эстетику осознанно, может иметь выдающийся дизайн.

Следствия для рабочего процесса немедленны. Если дизайн охватывает всё, то дизайнерские решения принимаются на каждом этапе. Выбор ассемблера ограничивает возможности конвейера сборки. Карта памяти определяет, какие эффекты могут сосуществовать. Порядок, в котором ты строишь эффекты, определяет, что можно вырезать, если время кончается. Каждый технический выбор имеет эстетическое последствие, и каждый эстетический выбор имеет техническую стоимость.

Производство демо должно быть одновременно снизу вверх и сверху вниз, с постоянной обратной связью между творческим видением и технической реальностью. Рабочий процесс должен поддерживать этот цикл обратной связи.

---

## 20.2 Lo-Fi Motion: полное исследование случая

В сентябре 2020 restorer опубликовал статью making-of для Lo-Fi Motion, демо для ZX Spectrum, выпущенного на DiHalt 2020. Статья ценна не каким-то одним техническим открытием, а тем, что документирует *весь производственный конвейер* --- от начальной концепции до готового бинарника --- с достаточной детализацией для воспроизведения.

### Концепция: "белорусский пиксель"

Lo-Fi Motion использует графику в разрешении атрибутов --- то, что restorer называет "lo-fi"-рендерингом. Большинство эффектов работают на сетке атрибутов 32x24 или в удвоенном разрешении 32x48, используя полузнакоряды. Никакого попиксельного рендеринга. Эстетика намеренно блочная, принимающая атрибутную сетку ZX Spectrum, а не борющаяся с ней. Название говорит само за себя: это lo-fi, и движение --- суть.

Это дизайнерское решение с каскадными техническими преимуществами. Эффекты в разрешении атрибутов дёшевы в расчёте (192 или 384 байта на кадр вместо 6 144), дёшевы в хранении (малые буферы кадра означают больше места для сжатых данных) и быстры для отображения (запись 768 байт в память атрибутов легко умещается в один кадр). Lo-fi-эстетика --- не компромисс, а выбор, который позволяет реализовать четырнадцать эффектов за две недели вечерней работы.

### Таблица сцен

В центре архитектуры Lo-Fi Motion --- **таблица сцен**, структура данных, управляющая всем демо. Каждая запись в таблице описывает одну сцену:

```
; Scene table entry (conceptual structure)
scene_entry:
    DB  bank_number          ; which 16K memory bank holds this effect's code
    DW  entry_address        ; start address of the effect routine
    DW  frame_duration       ; how many frames this scene runs
    DB  param_byte_1         ; effect-specific parameter
    DB  param_byte_2         ; effect-specific parameter
    ; ... additional parameters as needed
```

Движок демо читает таблицу сцен последовательно. Для каждой записи он подключает указанный банк памяти, переходит по адресу входа и запускает эффект на указанное количество кадров. Когда длительность истекает, он переходит к следующей записи. Всё демо --- все четырнадцать эффектов, все переходы, весь тайминг --- закодировано в одной таблице.

Это тот же архитектурный паттерн, который мы видели в скриптовом движке из Главы 12, сведённый к сути. Скриптовый движок Eager имел два уровня (внешний скрипт для эффектов, внутренний скрипт для вариаций параметров) и команду kWORK для асинхронной генерации кадров. Таблица сцен Lo-Fi Motion проще: один уровень, синхронная генерация, без асинхронной буферизации. Простота --- суть. Это работает. Это было построено за две недели.

Паттерн таблицы сцен имеет критическое преимущество для рабочего процесса: он отделяет контент от движка. Добавление нового эффекта означает написание процедуры эффекта и добавление одной записи в таблицу. Перестановка порядка демо означает перестановку записей таблицы. Корректировка тайминга означает изменение значений длительности. Код движка не меняется. Это разделение означает, что можно итерировать структуру демо --- его ритм, порядок, тайминг --- не трогая движок, и итерировать отдельные эффекты, не трогая структуру.

### Четырнадцать эффектов

Lo-Fi Motion содержит приблизительно четырнадцать различных визуальных эффектов. restorer перечисляет их по рабочим названиям: raskolbas, slime, fire, interp, plasma, rain, dina, rtzoomer, rbars, bigpic и несколько других. Каждый эффект --- самодостаточная процедура, рендерящая в виртуальный буфер.

Виртуальный буфер --- ключевое архитектурное решение. Большинство эффектов не пишут напрямую в экранную память. Вместо этого они рендерят в **буфер с одним байтом на пиксель** --- блок RAM, где каждый байт представляет значение цвета одной ячейки атрибутов. Буфер обычно имеет ширину 32 байта и высоту 24 или 48 байт (для полузнакового разрешения). После того как эффект отрисует в буфер, отдельная процедура вывода копирует буфер в память атрибутов, выполняя необходимое преобразование формата.

Эта косвенность стоит несколько сотен тактов за кадр, но даёт два преимущества. Во-первых, эффекты изолированы от физической раскладки экрана. Эффект, рендерящий в линейный буфер, не обязан знать о структуре адресации памяти атрибутов. Во-вторых, эффекты могут комбинироваться: два эффекта могут рендерить в отдельные буферы, а процедура смешивания может объединить их перед выводом. Lo-Fi Motion использует это для переходов --- плавная смена между двумя эффектами путём интерполяции значений буферов.

Буфер также позволяет режим полузнакового разрешения. Буфер 32x48 отображается на экран двумя записями атрибутов на знакоячейку (одна для "верхней половины" и одна для "нижней половины"), используя трюк с таймингом --- перезапись атрибутов на середине строки развёртки. Это удваивает вертикальное разрешение ценой более сложного кода вывода и более жёстких ограничений тайминга.

### Сами эффекты

Каждый эффект --- вариация на темы из предыдущих глав: **plasma** (сумма синусоид из Главы 9), **rotozoomer** (обход текстуры из Главы 7), **fire** (клеточный автомат, усредняющий соседей), **rain** (система частиц) и **bigpic** (предварительно сжатая растровая анимация, распаковываемая покадрово, с использованием техник из Главы 14). Ни один из этих эффектов не нов. Суть в том, что при разрешении атрибутов каждый из них достаточно дёшев, чтобы четырнадцать уместились в одном демо, построенном за две недели. Решение lo-fi --- мультипликатор силы.

### Тулчейн

Тулчейн restorer'a для Lo-Fi Motion --- конкретный ответ на вопрос "какие инструменты нужны для создания демо?"

**Ассемблер: sjasmplus.** Стандартный Z80-макроассемблер для современной ZX-сцены. Банкинг памяти (директивы SLOT/PAGE), условная компиляция, макросы, INCBIN для встроенных данных, DISPLAY для диагностики при сборке, вывод в .tap/.sna/.trd. Таблица сцен, код эффектов, сжатые данные и движок компилируются одним вызовом sjasmplus.

**Эмулятор: zemu.** Эмулятор, выбранный restorer'ом для Lo-Fi Motion. Unreal Speccy и Fuse одинаково распространены. Что важно --- точный тайминг и быстрая перезагрузка: нужно тестировать новую сборку каждые несколько минут.

**Графика: BGE 3.05 + Photoshop.** BGE (Burial Graphics Editor, автор Sinn/Delirium Tremens) --- графический редактор для ZX Spectrum, широко используемый в русской сцене для создания атрибутной графики непосредственно на целевой платформе. Пререндеренные PC-изображения проходят через Photoshop (или Multipaint, GIMP) и пользовательские скрипты.

**Скрипты: Ruby.** Автоматизация конвейера преобразования: изображения в данные атрибутов, таблицы синусов в бинарные инклуды, анимационные последовательности в дельта-сжатые потоки. Python, Perl и Processing одинаково распространены. Что важно --- преобразование автоматизировано и воспроизводимо.

**Сжатие: hrust1opt.** Hrust 1 с оптимальным парсингом. Z80-распаковщик релоцируемый (использует стек как рабочий буфер), удобен для демо, которые подключают и отключают данные в банках памяти.

Практический урок: нет единственно "правильного" тулчейна. Правильный --- тот, где каждый шаг от исходного ассета до финального бинарника автоматизирован, изменение одного входа регенерирует все зависимые выходы, и вся сборка завершается за секунды. Любой ручной шаг --- это баг, ждущий своего часа в 2 часа ночи перед дедлайном компо.

### Конвейер сборки

Инструменты соединяются через **Makefile** (или аналогичный скрипт сборки). Конвейер для Lo-Fi Motion выглядит примерно так:

```
Source assets (PNG, raw data)
    |
    v
Ruby conversion scripts
    |
    v
Binary includes (.bin, .hru)
    |
    v
sjasmplus assembly
    |
    v
Output binary (.trd or .sna)
    |
    v
Test in emulator (zemu)
```

Каждая стрелка --- правило в Makefile. Поменяй PNG, запусти `make`, и вся цепочка выполнится заново --- преобразование, сжатие, сборка --- порождая свежий бинарник за секунды. Загрузи его в эмулятор, посмотри результат, реши, что менять, отредактируй исходник, запусти `make` снова. Этот цикл редактирование-сборка-тестирование, измеряемый в секундах, --- то, что позволяет построить четырнадцать эффектов за две недели.

Makefile также служит документацией. Чтение правил сборки говорит тебе, какие именно скрипты порождают какие выходные файлы, от каких файлов данных зависят какие эффекты, и как выглядит полный граф зависимостей. Когда ты возвращаешься к проекту после шестимесячного перерыва, Makefile рассказывает, как всё соединяется.

### Временная шкала: две недели вечеров

Lo-Fi Motion был построен примерно за две недели вечерних сеансов кодинга. restorer работал на основной работе. Вечера были единственным доступным временем.

Эта временная шкала реалистична для lo-fi-атрибутного демо и поучительна для любого, кто планирует свою первую продукцию. Разбивка выглядит примерно так:

- **Дни 1--2:** Архитектура движка. Система таблицы сцен, виртуальный буфер, процедура вывода, базовый фреймворк. Запустить один эффект (plasma) через полный конвейер.
- **Дни 3--7:** Эффекты. Два-три эффекта за вечер, когда фреймворк готов. Каждый эффект --- 100--300 строк ассемблера, рендерящих в виртуальный буфер. Тестировать каждый по отдельности.
- **Дни 8--10:** Контент. Пререндеренные изображения, данные шрифтов, скрипты преобразования. Здесь скрипты на Ruby оправдывают себя.
- **Дни 11--12:** Интеграция. Все эффекты в таблице сцен, тайминг подогнан под музыку, переходы настроены. Здесь окупается рабочий процесс таблицы сцен с редактированием и пересборкой.
- **Дни 13--14:** Полировка и отладка. Цвета бордюра для визуализации тайминга (Глава 1), исправление эффектов, ломающихся на граничных случаях, финальный проход сжатия для уместивания всего в память.

Ключевое наблюдение: движок и конвейер съедают первые два дня. Каждый последующий день выигрывает от этих инвестиций. Если пропустить работу над конвейером и захардкодить первый эффект прямо в экранную память, ты сэкономишь день авансом и потеряешь неделю позже, когда попытаешься добавить второй эффект и обнаружишь, что ничего не модульно.

---

## 20.3 Культура making-of

ZX Spectrum-демосцена имеет поразительно сильную культуру документирования того, как создаются демо. Это не универсально для демосцены в целом --- на многих платформах демо выходят без документации, кроме титров. В Spectrum-сцене подробные статьи making-of --- традиция, и Hype (hype.retroscene.org) --- основная площадка для их публикации.

### Eager: технический NFO

Когда Introspec выпустил Eager (to live) на 3BM Open Air 2015, ZIP-файл содержал file_id.diz --- традиционный информационный файл демо --- который пошёл далеко за пределы титров и приветствий. Это был технический текст: подход к атрибутному туннелю, оптимизация четырёхкратной симметрией, гибридная техника цифровых барабанов, архитектура асинхронной генерации кадров. Kylearan, рецензируя демо на Pouet, написал: "Огромное спасибо за один только nfo-файл, обожаю читать технические разборы! Помогает понять, что я вижу/слышу."

Затем Introspec опубликовал ещё более подробную статью making-of на Hype, которая стала основным источником для Глав 9 и 12 этой книги. Статья объясняла не только *что* делает демо, но *почему* --- обоснование каждого технического решения, ограничения, определившие архитектуру, творческие цели, сформировавшие визуальный дизайн.

Этот уровень документирования служит нескольким целям. Для зрителя он углубляет понимание --- знание того, как работает эффект, делает просмотр более, а не менее вознаграждающим. Для других кодеров это образование --- статьи making-of на Hype --- ближайший аналог технической учебной программы в ZX-сцене. Для автора это форма завершения --- формулирование решений заставляет тебя понять собственную работу, а обратная связь сообщества (комментарии на Hype могут насчитывать сотни сообщений) подвергает твои рассуждения стресс-тестированию.

### GABBA: другой рабочий процесс

Статья diver4d making-of для GABBA (2019) документирует радикально отличный рабочий процесс от Eager. Там, где Introspec потратил недели на скриптовый движок и асинхронный буфер кадров, diver4d использовал Luma Fusion --- iOS-видеоредактор --- как свой инструмент синхронизации.

Мы рассмотрели технические детали в Главе 12. Важен рабочий процесс: diver4d осознал, что покадровая аудиовизуальная синхронизация --- это задача *видеомонтажа*, а не *программирования*. Выполняя работу по синхронизации в инструменте, предназначенном для этого, он мог итерировать тайминг за секунды вместо минут. Z80-код был слоем реализации; творческие решения принимались в видеоредакторе.

Это общий принцип. Рабочий процесс создания демо --- не о том, чтобы делать всё на ассемблере. А о том, чтобы использовать правильный инструмент для каждой задачи. Ассемблер для внутренних циклов. Processing или Ruby для генерации кода. Photoshop или Multipaint для графики. Видеоредактор для тайминга. Makefile, чтобы связать всё вместе. Демо --- результат; инструменты --- то, что доведёт тебя до него быстрее всего.

### NHBF: головоломка

Статья making-of UriS для NHBF (2025) документирует рабочий процесс на противоположном конце от конвейера Lo-Fi Motion с четырнадцатью эффектами. NHBF --- это 256-байтное интро: вся программа, код и данные, помещается в меньшее пространство, чем один кадр атрибутов. "Рабочий процесс" --- это один человек, уставившийся в hex-дамп, постоянно переставляющий инструкции в поисках более коротких кодировок, обнаруживающий, что значения регистров от одной процедуры случайно совпадают с потребностями в данных другой.

Мы рассмотрели конкретные техники в Главе 13. Урок для рабочего процесса --- о творчестве, управляемом ограничениями. UriS описывает процесс как "игру в головоломки" --- подходящая метафора, потому что пространство оптимизации в 256-байтном кодинге комбинаторно. Ты не можешь спланировать путь к решению. Ты можешь только продолжать переставлять кусочки и быть внимательным к случайным совпадениям. Открытие Art-Top, что значения регистров от процедуры очистки экрана совпали с длиной текстовой строки, не было запланировано. Оно было *замечено*.

Это важно для рабочего процесса создания демо любого масштаба. Даже в полноразмерном демо с нормальным движком, Makefile и таблицей сцен бывают моменты, когда лучшее решение приходит от того, что ты отступаешь и смотришь на всю картину целиком, замечая случайное совпадение между двумя системами, разработанными независимо. Головоломочный образ мышления не эксклюзивен для sizecoding. Это режим мышления, который улучшает всю работу над демо.

---

## 20.4 Тулчейн в деталях

ZX Spectrum-демосценический тулчейн сошёлся на стандартном наборе. Вот типичная структура проекта:

```
src/
    main.asm            ; entry point, scene table, engine loop
    engine.asm          ; scene table interpreter, buffer management
    effects/
        plasma.asm      ; individual effect routines
        fire.asm
        rotozoomer.asm
    sound/
        player.asm      ; music player (PT3 or custom)
        drums.asm       ; digital drum sample playback
    data/
        music.pt3       ; music file (INCBIN)
        screens.zx0     ; compressed graphics (INCBIN)
        sinetable.bin   ; pre-generated lookup table (INCBIN)
Makefile
tools/
    gen_sinetable.rb    ; Ruby script: generate sine table
    convert_gfx.rb      ; Ruby script: PNG to attribute data
```

### Ассемблер: sjasmplus

Рабочая лошадка. Банкинг памяти через директивы SLOT/PAGE, условная компиляция, макросы, INCBIN для встроенных данных, DISPLAY для диагностики при сборке и вывод в .tap/.sna/.trd. Типичное демо компилируется одним вызовом sjasmplus.

### Эмуляторы

**Unreal Speccy** предпочитается многими демосценерами русской сцены за детерминированный тайминг и точную эмуляцию Pentagon, с поддержкой TR-DOS, TurboSound и нескольких моделей клонов. **Fuse** широко доступен на Linux и macOS. **zemu** --- ещё один вариант, используемый restorer'ом для Lo-Fi Motion. Для отладки на уровне исходного кода **DeZog** в VS Code подключается к ZEsarUX и предоставляет точки останова, инспекцию регистров и просмотр памяти.

Выбери один эмулятор для основной разработки. Тестируй на других перед релизом. Демо, которые работают в одном эмуляторе и падают в другом --- партийная традиция, которой лучше избегать.

### Графика и генерация кода

**Multipaint** принудительно обеспечивает ограничения атрибутов в реальном времени --- специально создан для 8-битного пиксель-арта. **Photoshop, GIMP или Aseprite** предлагают творческую свободу, но требуют скриптов преобразования (Python, Ruby, Processing) для квантизации и экспорта. **Processing** обрабатывает генеративную графику и генерацию кода --- Introspec использовал его для генерации развёрнутых последовательностей кода хаос-зумера (Глава 9).

### Автоматизация сборки и CI

Makefile должен автоматизировать полный конвейер: от исходных ассетов через скрипты преобразования до сжатия и сборки. Если любой шаг требует ручного вмешательства, он подведёт в 2 часа ночи перед дедлайном.

CI через GitHub Actions становится всё более распространённым. Рабочий процесс, который собирает при каждом пуше, ловит неявные зависимости --- демо собирается на твоей машине, но падает в чистом окружении из-за необъявленной версии инструмента. Исходники Lo-Fi Motion на GitHub, опубликованы как эталонная реализация: клонируй, запусти `make`, получи рабочий бинарник. Эта открытость необычна для демосцены и ценна для обучения.

---

## 20.5 Культура компо

Демо без компо --- это видео на YouTube. Демо на компо --- это перформанс: показанное на большом экране, перед зрителями, в сравнении с другими работами, с призами на кону. Компо --- место, где работа встречает свою аудиторию, и культура вокруг компо формирует работу.

### Основные пати

ZX Spectrum-демосцена обслуживается несколькими регулярными пати, каждая со своим характером.

**Chaos Constructions (CC)** --- крупнейшее и наиболее престижное ZX-демо-мероприятие, проводимое в Санкт-Петербурге. ZX-демокомпо на CC привлекает сильнейшие работы: Break Space (2016), продолжатели Eager и продукции от групп Thesuper, 4th Dimension и Placeholders. CC --- место, куда идут соревноваться на высшем уровне. Аудитория большая, знающая и беспощадная.

**DiHalt** проводится в Нижнем Новгороде и имеет как летнее мероприятие, так и зимнюю "Lite"-версию. DiHalt, как правило, экспериментальнее CC --- аудитория приветлива к дебютантам, и атмосфера поощряет риск. Lo-Fi Motion был выпущен на DiHalt 2020. Если ты участвуешь в своём первом компо, DiHalt Lite --- хороший выбор.

**Multimatograf** --- меньшее мероприятие с традицией поощрения новых работ. Категории компо широки, требования к участникам минимальны, и атмосфера поддерживающая. Introspec рецензировал компо Multimatograf на Hype, иногда критически --- он предъявляет к каждой пати одинаковые стандарты --- но само мероприятие приветливо к новичкам.

**CAFe (Creative Art Festival)** --- мероприятие демосцены с более широким охватом (не исключительно ZX), но ZX-категории привлекают сильные работы. GABBA заняла первое место на CAFe 2019.

**Revision** --- крупнейшее мероприятие демосцены в мире, проводимое ежегодно в Саарбрюккене, Германия. Оно не специализировано на ZX, но категории "8-bit demo" и "oldschool" принимают работы для ZX Spectrum. Соревнование на Revision означает показ твоей работы глобальной демосцене --- аудитории из тысяч людей, большинство из которых никогда не видели демо для Spectrum. Megademica от SerzhSoft выиграла компо 4K intro на Revision 2019, доказав, что ZX-работы могут конкурировать на глобальной сцене.

### Как участвовать в первом компо

Процесс менее пугающий, чем кажется.

**1. Выбери пати.** Начни с меньшего мероприятия --- DiHalt Lite, Multimatograf или локальная пати, если она есть в твоём регионе. На крупных пати ожидания выше, и давление конкуренции с опытными группами на CC может быть контрпродуктивным для первого участия.

**2. Знай правила.** Каждая пати публикует правила компо, определяющие: требования к платформе (какая модель Spectrum, какая конфигурация эмулятора), формат файла (.tap, .trd, .sna), максимальный размер файла, принимаются ли удалённые работы, и дедлайны подачи. Прочитай правила. Следуй правилам. Технически впечатляющее демо, поданное как .tzx, когда правила требуют .trd, будет дисквалифицировано.

**3. Тестируй на целевой платформе.** Если пати запускает работы на реальном железе (физический Pentagon или Scorpion), тестируй на этом железе или на эмуляторе, настроенном на соответствие. Демо, которые прекрасно работают на одной модели и падают на другой --- удручающе частое явление. Различия тонкие: тайминг спорной памяти, задержки переключения банков, особенности чипа AY. Глава 15 покрывает машинно-специфичные детали; глава 5 серии "GO WEST" Introspec'a покрывает подводные камни переносимости.

**4. Подавай рано.** Большинство пати принимают удалённые работы по электронной почте или через веб-форму. Подай на день раньше, если возможно. Подачи в последний момент стрессовые и подверженные ошибкам (загрузка не того файла, забытый обязательный файл метаданных). Пати-версия может быть несовершенной --- многие демо обновляются до "финальных" версий после пати, исправляя баги, обнаруженные во время показа на компо.

**5. Напиши file_id.diz или NFO.** Включи текстовый файл с титрами (кто что делал), требованиями к платформе (какая модель, какой режим) и --- если ты готов --- кратким техническим описанием. Зрители ценят знание того, на что они смотрят. Сцена ценит документацию. И ты оценишь, что написал это, когда через три года попытаешься вспомнить, как работает генерация таблицы plasma.

**6. Смотри компо.** Если ты на пати лично, смотри своё демо на большом экране вместе с аудиторией. Опыт видения своей работы, показанной публично, слышания реакции зрителей, сравнения своей работы с другими --- вот ради чего существуют компо. Если ты подаёшь удалённо, смотри стрим, если он доступен. Некоторые пати публикуют записи компо на YouTube позже.

**7. Не ожидай победы.** Твоё первое участие --- учебный опыт. Цель --- закончить что-то, подать и увидеть показанным. Место --- бонус. Обратная связь, которую ты получишь --- от зрителей, от других сценеров, от собственной реакции на видение работы на большом экране --- стоит больше любого приза.

Удалённые работы принимаются на большинстве ZX-мероприятий. Lo-Fi Motion был удалённой работой на DiHalt 2020. Некоторые пати проводят исключительно онлайн-мероприятия, транслируемые на YouTube или Twitch. Если ближайшее демосценическое мероприятие в 12 часах лёта, онлайн-компо --- жизнеспособная отправная точка.

---

## 20.6 Сообщество

ZX Spectrum-демосцена достаточно мала, чтобы большинство активных участников знали друг друга, и достаточно велика, чтобы поддерживать несколько активных сообществ.

### Hype (hype.retroscene.org)

Основной русскоязычный форум для обсуждения ZX Spectrum-демосцены. Основан и модерируется Introspec'ом, здесь публикуются статьи making-of, технические руководства, обзоры компо и дискуссии о дизайне, составляющие основной материал для этой книги. Темы набирают сотни комментариев, опытные кодеры детально обсуждают подсчёт тактов. Для не говорящих по-русски инструменты машинного перевода в браузере достаточно хорошо справляются с прозой, а Z80-ассемблер читается одинаково на любом алфавите.

Культура прямая. Если ты постишь демо с ошибкой тайминга, кто-то скажет тебе точно, какой такт неправильный. Эта прямота порождает подлинные технические дискуссии, а не вежливые, но бесполезные поощрения.

### ZXArt (zxart.ee)

Всеобъемлющий архив творческих работ для ZX Spectrum --- демо, музыки, графики, игр, журналов и метаданных. Каждую продукцию в этой книге можно найти на ZXArt со скриншотами, титрами, результатами пати и загрузками. ZXArt также хранит оцифрованные ZX-журналы в формате TRD (Spectrum Expert, Born Dead, ZX Format), содержащие оригинальные статьи, заложившие техники, которым учит эта книга.

### Pouet (pouet.net)

Глобальная база данных продукций демосцены. Для ZX-сцены Pouet --- мост к более широкому сообществу: ZX-демо оцениваются людьми, которые преимущественно смотрят PC- или Amiga-продукции. Смена перспективы ценна: технически блестящий внутренний цикл, впечатляющий читателей Hype, может быть невидим для комментатора Pouet, который фокусируется на визуальном воздействии и музыкальной синхронизации. Pouet также хранит NFO-файлы --- когда не можешь найти статью making-of на Hype, проверь NFO на Pouet.

---

## 20.7 Управление проектом для создателей демо

Создание демо --- это управление проектом. У проекта есть дедлайн (дата пати), результаты (финальный бинарник), зависимости (музыка, графика, эффекты, движок) и обычно команда участников с конкурирующими приоритетами. Управление этим не гламурно, но это то, что отделяет завершённые демо от заброшенных прототипов.

### Минимально жизнеспособное демо

Начни с простейшей возможной версии демо, которая является завершённой --- не отполированной, не впечатляющей, но завершённой. Один эффект, одна мелодия, нормальное начало и конец. Запусти это через полный конвейер сборки в первые несколько дней. Это твоя страховочная сеть. Если всё пойдёт не так --- если сложный эффект не работает, если музыкант опаздывает с финальным треком, если твой жёсткий диск умрёт за неделю до пати --- у тебя есть что подать.

Затем итерируй. Добавляй эффекты по одному. Замени placeholder-музыку, когда прибудет финальный трек. Добавь переходы, отполируй тайминг, оптимизируй использование памяти. Каждая итерация порождает завершённое, подаваемое демо, которое лучше предыдущего. В любой момент ты можешь остановиться и подать то, что есть.

Именно так был построен Lo-Fi Motion. restorer не написал четырнадцать эффектов и потом сшил их вместе. Он построил движок и один эффект, проверил, что они работают, затем добавлял эффекты по одному. Каждый вечер работы порождал чуть лучшее демо. Если бы у него кончилось время на десяти эффектах вместо четырнадцати, демо всё равно было бы завершённым и подаваемым.

### Работа с соавторами

Большинство демо --- коллаборации. Три принципа держат их на ходу:

**Установи формат данных рано.** Музыканту нужно знать: PT3 или пользовательский плеер? Один AY или TurboSound? Как сигнализируются триггеры барабанов? Художнику нужно знать: разрешение атрибутов или пиксельное? Ограничения цвета? Максимальный размер файла? Получить TurboSound-композицию, когда твой движок поддерживает только один AY --- катастрофа, и это твоя вина за то, что не указал ограничения.

**Сообщай временную шкалу.** Если пати через четыре недели, скажи музыканту, что тебе нужен трек через две. Запас --- для интеграции, отладки и сюрпризов.

**Предоставляй placeholder'ы.** Используй placeholder-.pt3 с правильным темпом до прибытия финального трека. Используй программистскую графику до прибытия финальной. Движок не должен зависеть от финальных ассетов. Когда настоящие ассеты прибудут, вставь их в конвейер и пересобери.

### Отладка и тестирование

Баги в демо уникально болезненны, потому что проявляются перед аудиторией. Краш во время показа на компо --- и техническая неудача, и социальный конфуз. Тестирование не опционально.

**Тестируй на нескольких эмуляторах.** Каждый эмулятор имеет немного различный тайминг, инициализацию памяти и поведение AY. Демо, которое работает в Unreal Speccy, но падает в Fuse, вероятно, имеет допущение о тайминге или памяти, верное для Pentagon, но не для стандартного Spectrum.

**Тестируй с холодного старта.** Очисти всю память перед загрузкой демо. Не предполагай никаких значений регистров или содержимого памяти от предыдущей программы. Если твоё демо работает после запуска предыдущего демо, но падает с чистой загрузки, у тебя баг инициализации.

**Тестируй файл для компо, а не девелоперский бинарник.** Файл, который ты подаёшь, должен быть точно тем файлом, который ты тестировал. Не "быстро перекомпилированной" версией с исправлением в последний момент. Исправления в последний момент вносят баги в последний момент.

**Используй цвета бордюра для тайминга.** Техника из Главы 1: устанавливай бордюр в разные цвета в разных точках цикла кадра. Если цветная полоска бордюра заходит в видимую область, твой код слишком медленный. Если нет --- у тебя запас. Это самый быстрый способ проверить, что эффект укладывается в бюджет кадра.

---

## 20.8 Преодоление платформы: "MORE" Introspec'a

В феврале 2015 Introspec опубликовал на Hype короткое эссе, озаглавленное просто "MORE". Это не техническая статья. В ней нет кода, нет подсчёта тактов, нет внутренних циклов. Это вызов ZX Spectrum-сцене --- и, по расширению, всем, кто работает в рамках аппаратных ограничений.

Аргумент в том, что лучшие демо --- это не те, которые делают самые впечатляющие вещи *вопреки* ограничениям платформы. Это те, которые полностью преодолевают платформу --- которые создают впечатления, значимые на любом железе. Ограничения платформы формируют технику, но не должны ограничивать амбицию.

> Двух пикселей достаточно, чтобы рассказать историю.

Это самая цитируемая строка Introspec'a. Она означает: художественное содержание демо не определяется его разрешением, глубиной цвета, количеством полигонов или частотой дискретизации. Два пикселя --- две ячейки атрибутов, две точки на сетке 32x24 --- могут рассказать историю, если тайминг правильный, контекст ясен и намерение искренно. Технология служит искусству, а не наоборот.

Introspec ссылается на работу Джеймса Хьюстона "Big Ideas (Don't Get Any)" --- видео, где Sinclair ZX Spectrum, матричный принтер и другое устаревшее оборудование исполняют песню Radiohead. Проект трогает не из-за технического достижения, а потому что выбор оборудования *что-то значит*. Устаревание --- суть. Хрупкость --- красота.

Практическое следствие: техника необходима, но недостаточна. Ты можешь овладеть каждым эффектом в этой книге и всё равно произвести демо, которое никто не запомнит. Что делает демо запоминающимся --- не то, что оно делает, а то, что оно говорит. Даже абстрактное демо имеет личность: его ритм говорит что-то о напряжении и разрядке; его цветовая палитра вызывает настроение; его выбор музыки создаёт эмоциональный контекст. Кодер, который относится к этому как к мелочам, производит техдемо. Кодер, который относится к этому как к дизайнерским решениям, производит демо.

Lo-Fi Motion принял свою lo-fi-эстетику как идентичность. Eager превратил сетку 32x24 из ограничения в творческий выбор. NHBF нашёл красоту в головоломке 256 байт. В каждом случае ограничение стало медиумом.

Вот чего требует "MORE". Не больше полигонов, не больше цветов, не больше эффектов. Больше амбиции. Больше намерения. Больше готовности относиться к демо для ZX Spectrum как к форме искусства.

---

## 20.9 Твоё первое демо: практическая дорожная карта

Для читателя, следовавшего этой книге с Главы 1 и желающего сделать демо, вот конкретный путь.

### Неделя 1: Фундамент

1. **Настрой тулчейн.** Установи sjasmplus, выбери эмулятор (Unreal Speccy, Fuse или ZEsarUX), настрой директорию проекта с Makefile. Проверь, что ты можешь собрать минимальную программу и запустить её в эмуляторе.

2. **Построй движок таблицы сцен.** Напиши минимальный движок, который читает таблицу сцен и вызывает процедуры эффектов на указанную длительность. Начни с архитектуры Lo-Fi Motion: номер банка, адрес входа, количество кадров. Заставь это работать с одним фиктивным эффектом (залить экран цветом, инкрементировать цвет каждый кадр).

3. **Добавь музыку.** Интегрируй PT3-плеер в обработчик прерывания IM2 (Глава 11). Подставь любой .pt3-файл как placeholder. Проверь, что музыка играет, пока фиктивный эффект работает.

### Неделя 2: Эффекты

4. **Построй свой первый настоящий эффект.** Атрибутная plasma --- естественная отправная точка: она дешёвая, визуально богатая и хорошо изученная (Глава 9). Рендери в виртуальный буфер и копируй в память атрибутов.

5. **Построй свой второй эффект.** Fire, rotozoomer, rain, цветные полосы --- выбери один из эффектов, рассмотренных в Части II. Два эффекта и переход между ними составляют минимальное демо.

6. **Добавь переход.** Простой crossfade между двумя атрибутными буферами: интерполяция значений цвета за 25--50 кадров. Или жёсткая склейка, синхронизированная с битом в музыке.

### Неделя 3: Полировка

7. **Замени placeholder-музыку.** Если у тебя есть музыкант-соавтор, интегрируй финальный трек. Если нет, потрать время на выбор .pt3, который подходит настроению и ритму твоего демо.

8. **Настрой тайминг.** Здесь таблица сцен оправдывает себя. Переставь эффекты, подгони длительности, привяжи переходы к музыкальным событиям. Пересобирай и тестируй многократно.

9. **Добавь начало и конец.** Экран загрузки (сжатый ZX0, Глава 14), титульная заставка, экран финальных титров. Первое и последнее впечатления важны.

### Неделя 4: Релиз

10. **Тестируй.** Несколько эмуляторов. Холодный старт. Точно тот файл, который будешь подавать.

11. **Напиши NFO.** Титры, требования к платформе, приветствия и --- если ты щедр --- техническое описание того, как работают эффекты. Будущий ты будет благодарен.

12. **Подавай.** Выбери пати. Следуй правилам. Загрузи файл. Затем смотри компо и наслаждайся видением своей работы на экране.

Ты не победишь. Твои эффекты будут проще, чем у опытных групп. Твоя синхронизация будет несовершенна. Твои переходы будут грубыми. Ничто из этого не имеет значения. Важно то, что ты закончил демо, подал его на компо и присоединился к сообществу, которое делает это уже тридцать лет. Следующее демо будет лучше. И следующее за ним.

---

## Итого

- **Дизайн --- это всё.** Introspec определяет дизайн демо как "совокупность всех компонентов демо, как видимых, так и скрытых" --- архитектуру кода, раскладку памяти, ритм и эмоциональную дугу, а не только визуальные эффекты.

- **Lo-Fi Motion предоставляет воспроизводимый шаблон производства:** таблица сцен управляет структурой демо, эффекты рендерят в виртуальные буферы с одним байтом на пиксель, а тулчейн (sjasmplus + zemu + скрипты Ruby + hrust1opt) соединяется через Makefile. Четырнадцать эффектов были построены за две недели вечерней работы.

- **Паттерн таблицы сцен** отделяет контент от движка. Добавление, удаление или перестановка эффектов означает редактирование таблицы данных, а не перестройку кода. Это поддерживает быструю итерацию ритма и структуры.

- **Культура making-of --- сила ZX-сцены.** Подробные технические разборы --- от NFO Eager до рабочего процесса GABBA с видеоредактором и 256-байтной головоломки NHBF --- служат образованием, документацией и строительством сообщества.

- **Стандартный тулчейн** сходится на sjasmplus (ассемблер), Unreal Speccy или Fuse (эмулятор), BGE или Multipaint (графика), скрипты Ruby или Python (преобразование и генерация кода), ZX0 или hrust1opt (сжатие) и Makefile (автоматизация сборки). CI через GitHub Actions становится всё более распространённым.

- **Культура компо** сосредоточена вокруг событий Chaos Constructions, DiHalt, Multimatograf, CAFe и Revision. Участие в первом компо требует выбора подходящего мероприятия, соблюдения правил, тщательного тестирования и ранней подачи.

- **Сообщество** живёт на Hype (технические дискуссии, статьи making-of), ZXArt (архив продукций) и Pouet (глобальная база данных демосцены).

- **Управление проектом имеет значение.** Сначала построй минимально жизнеспособное демо, затем итерируй. Установи форматы данных с соавторами рано. Тестируй на нескольких эмуляторах с холодного старта. Подавай точно тот файл, который тестировал.

- **"MORE" Introspec'a** призывает создателей демо преодолевать ограничения платформы: "Двух пикселей достаточно, чтобы рассказать историю." Технология служит искусству, а не наоборот. Лучшие демо --- не самые технически впечатляющие, а те, где каждый компонент, видимый и скрытый, служит цельному творческому видению.

---

*Далее: Глава 21 --- Полная игра: ZX Spectrum 128K. Мы переходим от демо к играм, интегрируя всё из Частей I--V в полноценный горизонтальный платформер.*

> **Источники:** restorer, "Making of Lo-Fi Motion", Hype, 2020 (hype.retroscene.org/blog/demo/1023.html); Introspec, "О дизайне", Hype, 2015 (hype.retroscene.org/blog/demo/64.html); Introspec, "MORE", Hype, 2015 (hype.retroscene.org/blog/demo/87.html); Introspec, "Making of Eager", Hype, 2015 (hype.retroscene.org/blog/demo/261.html); diver4d, "Making of GABBA", Hype, 2019 (hype.retroscene.org/blog/demo/948.html); UriS, "NHBF Making-of", Hype, 2025 (hype.retroscene.org/blog/dev/1120.html)
